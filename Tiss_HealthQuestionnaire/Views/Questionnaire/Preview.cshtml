@model Tiss_HealthQuestionnaire.Models.QuestionnaireViewModel
@using Tiss_HealthQuestionnaire.Models
@{
    Layout = "~/Views/Shared/_HealthLayout.cshtml";
}
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">問卷總預覽</h1>

        <!-- 個人基本資料 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">個人基本資料</h2>
            <div class="grid grid-cols-2 gap-6 text-gray-700 text-xl">
                <p><strong>專項:</strong> @Model.Specialist</p>
                <p><strong>填表人:</strong> @Model.FillName</p>
                <p><strong>選手編號:</strong> @Model.AtheNum</p>
                <p><strong>性別:</strong> @(Model.Gender == 1 ? "男" : "女")</p>
                <p><strong>填表日期:</strong> @Model.FillDate.ToString("yyyy-MM-dd")</p>
            </div>
        </div>

        <!--第一題：過去健康檢查病史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">過去健康檢查病史 (PastHealth)</h2>
            <p class="mb-4">
                <strong>
                    過去兩年內的健康檢查是否有異常項目：
                    @QuestionnaireViewModel.ConvertYesNoToLocalizedString(Model.PastHealthHistory)
                </strong>
            </p>
            @if (Model.PastHealthHistory == "yes" && Model.PastHealthResponses?.Any() == true)
            {
                <h3 class="text-lg font-bold mb-4">詳細異常項目</h3>
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">項目 (Item)</th>
                            <th class="border border-gray-300 px-4 py-2">填寫內容 (Details)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.PastHealthItems.Where(i => i.IsYes))
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">@item.ItemZh</td>
                                <td class="border border-gray-300 px-4 py-2">
                                    @(Model.PastHealthResponses.ContainsKey(item.ID.ToString()) ? Model.PastHealthResponses[item.ID.ToString()] : "未填寫")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>

        <!-- 第二題：過敏史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">過敏史 (AllergicHistory)</h2>
            <p class="mb-4">
                <strong>
                    是否有過敏：
                    @QuestionnaireViewModel.ConvertYesNoToLocalizedString(Model.AllergicHistory)
                </strong>
            </p>
            @if (Model.AllergicHistoryItems?.Any() == true)
            {
                <h3 class="text-lg font-bold mb-4">過敏史 詳細項目</h3>
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">過敏項目 (Item)</th>
                            <th class="border border-gray-300 px-4 py-2">過敏描述 (Allergy Description)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.AllergicHistoryItems)
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">@item.ItemZh</td>
                                <td class="border border-gray-300 px-4 py-2">
                                    @(Model.AllergicHistoryResponses.ContainsKey(item.ID.ToString()) ? Model.AllergicHistoryResponses[item.ID.ToString()] : "未填寫")
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>

        <!-- 第三題：家族病史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">家族病史(Family History)-二等親內</h2>
            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">項目</th>
                        <th class="border border-gray-300 px-4 py-2">狀態</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.FamilyHistoryItems)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@item.GeneralPartsZh</td>
                            <td class="border border-gray-300 px-4 py-2">
                                @if (item.IsYes)
                                {
                                    <span class="text-red-600">是 (Yes)</span>
                                }
                                else if (item.IsNo)
                                {
                                    <span class="text-green-600">否 (No)</span>
                                }
                                else if (item.IsUnknown)
                                {
                                    <span class="text-black-600">未知 (Unknow)</span>
                                }
                                else
                                {
                                    <span class="text-gray-400">未填寫</span>
                                }
                            </td>
                        </tr>
                    }

                    @if (!string.IsNullOrEmpty(Model.OtherFamilyHistory))
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">其他</td>
                            <td class="border border-gray-300 px-4 py-2">@Model.OtherFamilyHistory</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- 第四題：過去病史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">過去病史 (Past History)</h2>

            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">項目 (Item)</th>
                        <th class="border border-gray-300 px-4 py-2">狀態 (Status)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.PastHistoryItems)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@item.GeneralPartsZh</td>
                            <td class="border border-gray-300 px-4 py-2">
                                @if (item.IsYes)
                                {
                                    <span class="text-red-600">是 (Yes)</span>
                                }
                                else if (item.IsNo)
                                {
                                    <span class="text-green-600">否 (No)</span>
                                }
                                else if (item.IsUnknown)
                                {
                                    <span class="text-black-600">未知 (Unknow)</span>
                                }
                                else
                                {
                                    <span class="text-gray-400">未填寫</span>
                                }
                            </td>
                        </tr>
                    }

                    @if (!string.IsNullOrEmpty(Model.OtherPastHistory))
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">其他</td>
                            <td class="border border-gray-300 px-4 py-2">@Model.OtherPastHistory</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- 第五題：現在病史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">現在病史 (Present Illness)</h2>

            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">部位 (Body Part)</th>
                        <th class="border border-gray-300 px-4 py-2">是否有問題 (Status)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model.PresentIllnessItems)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@item.PartsOfBodyZh (@item.PartsOfBodyEn)</td>
                            <td class="border border-gray-300 px-4 py-2">
                                @if (item.IsYes)
                                {
                                    <span class="text-red-600">是 (Yes)</span>
                                }
                                else if (item.IsNo)
                                {
                                    <span class="text-green-600">否 (No)</span>
                                }
                                else
                                {
                                    <span class="text-gray-400">未填寫</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <!-- 第六題：顯示藥物史 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">藥物史 (PastDrugs)</h2>
            @if (Model.PastDrugsItems != null && Model.PastDrugsItems.Any())
            {
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 p-2">藥物名稱 (Item)</th>
                            <th class="border border-gray-300 p-2">是否使用過 (Used)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.PastDrugsItems)
                        {
                            <tr>
                                <td class="border border-gray-300 p-2">@item.ItemZh (@item.ItemEn)</td>
                                <td class="border border-gray-300 p-2
                                    @(item.IsUsed == true ? "text-red-600 font-semibold" :
                                    item.IsUsed == false ? "text-green-600 font-semibold" : "text-gray-500")">
                                    @(item.IsUsed == true ? "是 (Yes)" :item.IsUsed == false ? "否 (No)" : "未填寫")
                                </td>
                            </tr>
                        }
                        <tr>
                            <td class="border border-gray-300 p-2 font-semibold">其他 (Others)</td>
                            <td class="border border-gray-300 p-2">@(!string.IsNullOrEmpty(Model.OtherDrug) ? Model.OtherDrug : "未填寫")</td>
                        </tr>

                        <!-- 加入「是否有申請治療用途豁免 (TUE)」 -->
                        <tr>
                            <td class="border border-gray-300 p-2 font-semibold">是否有申請治療用途豁免 (TUE)</td>
                            <td class="border border-green-300 p-2">
                                @(Model.TUE == "yes" ? "是" : Model.TUE == "no" ? "否" : "未填寫")
                            </td>
                        </tr>
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-gray-500">未填寫</p>
            }
        </div>

        <!-- 第七題：顯示營養品 -->
        <div class="mb-8">
            <h2 class="text-2xl font-semibold text-blue-600 mb-4">營養品 (PastSupplements)</h2>
            @if (Model.PastSupplementsItems != null && Model.PastSupplementsItems.Any())
            {
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 p-2">營養品名稱 (Item)</th>
                            <th class="border border-gray-300 p-2">是否使用 (Used)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.PastSupplementsItems)
                        {
                            <tr>
                                <td class="border border-gray-300 p-2">@item.ItemZh (@item.ItemEn)</td>
                                <td class="border border-gray-300 p-2
                                    @(item.IsUsed == true ? "text-green-600 font-semibold" :
                                    item.IsUsed == false ? "text-red-600 font-semibold" : "text-gray-500")">
                                    @(item.IsUsed == true ? "是 (Yes)" : item.IsUsed == false ? "否 (No)" : "未填寫")
                                </td>
                            </tr>
                        }
                        <tr>
                            <td class="border border-gray-300 p-2 font-semibold">其他 (Others)</td>
                            <td class="border border-gray-300 p-2">@(!string.IsNullOrEmpty(Model.OtherSupplements) ? Model.OtherSupplements : "未填寫")</td>
                        </tr>
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-gray-500">未填寫</p>
            }
        </div>

        <!-- 第八題：女性問卷 -->
        @if (Model.Gender == 2) // 只有女性才顯示
        {
            <div class="mb-8">
                <h2 class="text-2xl font-semibold text-blue-600 mb-4">女性問卷 (Female Questionnaire)</h2>

                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">問題 (Question)</th>
                            <th class="border border-gray-300 px-4 py-2">回答 (Answer)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.FemaleQuestionnaireItems)
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">
                                    @item.QuestionZh <br />
                                    <span class="text-gray-500">@item.QuestionEn</span>
                                </td>
                                <td class="border border-gray-300 px-4 py-2">
                                    @{
                                        string translatedAnswer = Model.FemaleQuestionnaireAnswers.ContainsKey(item.ID)
                                            ? Model.FemaleQuestionnaireAnswers[item.ID]
                                            : "未回答";

                                        // 轉換英文答案成中文
                                        if (translatedAnswer == "yes")
                                        {
                                            translatedAnswer = "是";
                                        }
                                        else if (translatedAnswer == "no")
                                        {
                                            translatedAnswer = "否";
                                        }
                                        else if (translatedAnswer == "none")
                                        {
                                            translatedAnswer = "目前無生理週期";
                                        }
                                    }
                                    @translatedAnswer
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }

        <!-- 第九題：過去傷害（已復原） -->
        <div class="mb-8">
        <h2 class="text-2xl font-semibold text-blue-600 mb-4">過去傷害狀況-已復原</h2>
        <p class="mb-4"><strong>狀態：</strong>@(Model.PastInjuryStatusAnswer == "yes" ? "有過去傷害" : "無過去傷害")</p>

        @if (Model.PastInjuryStatusAnswer == "yes")
        {
            <!-- 受傷部位 -->
            <h3 class="text-lg font-semibold mt-4">受傷部位</h3>
            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">部位 (Body Part)</th>
                        <th class="border border-gray-300 px-4 py-2">左 (Left)</th>
                        <th class="border border-gray-300 px-4 py-2">右 (Right)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var injury in Model.PastInjuryItems)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@injury.PastInjuryPart</td>
                            <td class="border border-gray-300 px-4 py-2">
                                @if (injury.LeftSide)
                                {
                                    <span class="text-red-600 font-semibold">是 (Yes)</span>
                                }
                                else
                                {
                                    <span class="text-gray-400">否 (No)</span>
                                }
                            </td>
                            <td class="border border-gray-300 px-4 py-2">
                                @if (injury.RightSide)
                                {
                                    <span class="text-red-600 font-semibold">是 (Yes)</span>
                                }
                                else
                                {
                                    <span class="text-gray-400">否 (No)</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <!-- 傷勢類型 -->
            <h3 class="text-lg font-semibold mt-4">傷勢類型</h3>
            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">傷勢類型 (Injury Type)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var injury in Model.PastInjuryTypes)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@injury.InjuryName</td>
                        </tr>
                    }
                </tbody>
            </table>

            <!-- 治療方式 -->
            <h3 class="text-lg font-semibold mt-4">治療方式</h3>
            <table class="min-w-full bg-white border border-gray-300">
                <thead>
                    <tr class="bg-gray-100">
                        <th class="border border-gray-300 px-4 py-2">治療方式 (Treatment Method)</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var treatment in Model.PastTreatmentItems)
                    {
                        <tr>
                            <td class="border border-gray-300 px-4 py-2">@treatment.Method</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        </div>

        <!-- 第十題：目前傷害狀況 -->
        <div class="mb-8">
            <h2 class="text-xl font-semibold text-blue-600 mb-4">目前傷害狀況</h2>
            <p>狀態：@(Model.CurrentInjuryStatusAnswer == "yes" ? "有目前傷害" : "無目前傷害")</p>

            @if (Model.CurrentInjuryStatusAnswer == "yes")
            {
                <h3 class="text-lg font-semibold mt-4">受傷部位</h3>
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">部位 (Body Part)</th>
                            <th class="border border-gray-300 px-4 py-2">左 (Left)</th>
                            <th class="border border-gray-300 px-4 py-2">右 (Right)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var injury in Model.CurrentInjuryItems)
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">@injury.CurrentInjuryPart</td>
                                <td class="border border-gray-300 px-4 py-2">
                                    @if (injury.LeftSide)
                                    {
                                        <span class="text-red-600 font-semibold">是 (Yes)</span>
                                    }
                                    else
                                    {
                                        <span class="text-gray-400">否 (No)</span>
                                    }
                                </td>
                                <td class="border border-gray-300 px-4 py-2">
                                    @if (injury.RightSide)
                                    {
                                        <span class="text-red-600 font-semibold">是 (Yes)</span>
                                    }
                                    else
                                    {
                                        <span class="text-gray-400">否 (No)</span>
                                    }
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                <!-- 傷勢類型 -->
                <h3 class="text-lg font-semibold mt-4">傷勢類型</h3>
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">傷勢類型 (Injury Type)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var injury in Model.CurrentInjuryTypes)
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">@injury.InjuryName</td>
                            </tr>
                        }
                    </tbody>
                </table>

                <!-- 治療方式 -->
                <h3 class="text-lg font-semibold mt-4">治療方式</h3>
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2">治療方式 (Treatment Method)</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var treatment in Model.CurrentTreatmentItems)
                        {
                            <tr>
                                <td class="border border-gray-300 px-4 py-2">@treatment.Method</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>

        <!-- 第11題：心血管篩檢 -->
        <div class="mb-8">
            <h2 class="text-xl font-bold mb-4">心血管篩檢 Cardiovascular Screening</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 px-4 py-2 text-center">項次</th>
                            <th class="border border-gray-300 px-4 py-2">問題</th>
                            <th class="border border-gray-300 px-4 py-2 text-center">答案</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.CardiovascularScreeningItems)
                        {
                            var responseText = item.Response.HasValue ? (item.Response.Value ? "是" : "否") : "未填寫";

                            var textColorClass = item.Response.HasValue ? (item.Response.Value ? "text-red-600" : "text-green-600")
                                : "text-gray-500";

                            <tr>
                                <td class="border border-gray-300 px-4 py-2 text-center">@item.Id</td>
                                <td class="border border-gray-300 px-4 py-2">@item.Question</td>
                                <td class="border border-gray-300 px-4 py-2 text-center font-semibold @textColorClass">
                                    @responseText
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 第12題：腦震盪篩檢-選手自填-(1) -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold text-blue-600 mb-4">腦震盪篩檢-選手自填 (Concussion Screening)</h3>
            @if (Model.ConcussionScreeningItems != null && Model.ConcussionScreeningItems.Any())
            {
                <table class="w-full border-collapse border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border px-4 py-2">項次</th>
                            <th class="border px-4 py-2">問題</th>
                            <th class="border px-4 py-2">答案</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.ConcussionScreeningItems)
                        {
                            var answer = Model.ConcussionScreeningAnswers.ContainsKey(item.Id)
                        ? Model.ConcussionScreeningAnswers[item.Id]
                        : "未回答";

                            <tr>
                                <td class="border px-4 py-2 text-center">@item.Id</td>
                                <td class="border px-4 py-2">@item.Question</td>
                                <td class="border px-4 py-2 text-center font-semibold
                                     @(answer == "是" ? "text-red-600" : answer == "否" ? "text-green-600" :                       "text-gray-500")">
                                    @answer
                                </td>
                            </tr>
                        }
                        <tr>
                            <td colspan="3" class="border px-4 py-2">
                                <strong>是否服用藥物：</strong>
                                <span class="font-semibold
                            @(Model.ConcussionScreeningMedicationAnswer == "是" ? "text-red-600" :
                              Model.ConcussionScreeningMedicationAnswer == "否" ? "text-green-600" :
                              "text-gray-500")">
                                    @Model.ConcussionScreeningMedicationAnswer
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="border px-4 py-2">
                                <strong>服用藥物細節：</strong> @Model.ConcussionScreeningMedicationDetails
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="border px-4 py-2">
                                <strong>備註：</strong> @Model.ConcussionScreeningNotes
                            </td>
                        </tr>
                    </tbody>
                </table>
            }
        </div>

        <!-- 第13題：症狀自我評估-選手自填(2) -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold text-blue-600 mb-4">症狀自我評估 (Self-assessment of Symptoms)</h3>
            @if (Model.SymptomEvaluationItems != null && Model.SymptomEvaluationItems.Any())
            {
                <table class="w-full border-collapse border border-gray-300 text-center">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border px-4 py-2">項次</th>
                            <th class="border px-4 py-2">症狀</th>
                            <th class="border px-4 py-2">分數</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.SymptomEvaluationItems)
                        {
                            <tr>
                                <td class="border px-4 py-2">@item.ID</td>
                                <td class="border px-4 py-2">@item.SymptomItem</td>
                                <td class="border px-4 py-2 font-semibold text-blue-600">
                                    @if (Model.SymptomEvaluationAnswers.ContainsKey(item.ID))
                                    {
                                        @Model.SymptomEvaluationAnswers[item.ID]
                                    }
                                    else
                                    {
                                        <span class="text-gray-500">未填寫</span>
                                    }
                                </td>
                            </tr>
                        }
                        <!-- 症狀統計結果 -->
                        <tr class="bg-gray-100 font-semibold">
                            <td class="border px-4 py-2" colspan="2">症狀總數</td>
                            <td class="border px-4 py-2 text-black-600">
                                @Model.SymptomEvaluationAnswers.Count(s => s.Value > 0)
                            </td>
                        </tr>
                        <tr class="bg-gray-100 font-semibold">
                            <td class="border px-4 py-2" colspan="2">症狀分數總和</td>
                            <td class="border px-4 py-2 text-black-600">
                                @Model.SymptomEvaluationAnswers.Sum(s => s.Value)
                            </td>
                        </tr>
                    </tbody>
                </table>
            }
        </div>

        <!--第14題 顯示骨科篩檢 -->
        <div class="mb-8">
            <h3 class="text-xl font-semibold text-blue-600 mb-4">骨科篩檢 (Orthopaedic Screening)</h3>
            @if (Model.OrthopaedicScreeningItems != null && Model.OrthopaedicScreeningItems.Any())
            {
                <table class="min-w-full bg-white border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border border-gray-300 p-2">項次</th>
                            <th class="border border-gray-300 p-2">指示操作</th>
                            <th class="border border-gray-300 p-2">觀察重點</th>
                            <th class="border border-gray-300 p-2">結果</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var detail in Model.OrthopaedicScreeningItems)
                        {
                            var responseText = detail.Response.HasValue ? (detail.Response.Value ? "正常" : "異常") : "未填寫";

                            var textColorClass = detail.Response.HasValue ? (detail.Response.Value ? "text-green-600" : "text-red-600") : "text-gray-500";

                            <tr>
                                <td class="border border-gray-300 p-2 text-center">@detail.Id</td>
                                <td class="border border-gray-300 p-2">@detail.Instructions</td>
                                <td class="border border-gray-300 p-2">@detail.ObservationPoints</td>
                                <td class="border border-gray-300 p-2 text-center font-semibold @textColorClass">
                                    @responseText
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>

        <!-- 操作按鈕 -->
        <div class="flex justify-between items-center mt-6">
            <a href="@Url.Action("Main")" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded px-6 py-3">
                返回編輯
            </a>
            <form method="post" action="/Questionnaire/Submit" class="inline">
                <button type="submit" class="bg-green-500 hover:bg-green-600 text-white font-semibold rounded px-6 py-3">
                    確認送出
                </button>
            </form>
        </div>

    </div>
</body>
</html>